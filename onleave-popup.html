<style>
  body.prevent-scroll {
    overflow: hidden !important;
    height: 100% !important;
  }
  .onleave-popup .onleave-popup__content {
    transform: translateY(70px);
    opacity: 0;
    transition: all 300ms ease-in-out;
  }
  .onleave-popup.display.fade .onleave-popup__content {
    opacity: 1;
    transition-delay: 200ms;
    transform: translateY(0);
  }
</style>
<script>
  window.addEventListener('load', () => {
    const popup = document.querySelector('.onleave-popup');
    const body = document.querySelector('body');

    // Show popup
    const showPopup = (e) => {
      if (e.clientY <= 10) {
        document.removeEventListener('mouseleave', showPopup);
        popup.classList.add('display');
        body.classList.add('prevent-scroll');
        setTimeout(() => popup.classList.add('fade'), 10);
      }
    };

    // Close popup
    const closePopup = () => {
      popup.classList.remove('fade');
      setTimeout(() => {
        body.classList.remove('prevent-scroll');
        popup.classList.remove('display');
      }, 300);
    };

    // On leave
    document.addEventListener('mouseleave', showPopup);

    // Close on overlay & close button click
    ['.onleave-popup__overlay', '.onleave-popup__close'].forEach((selector) =>
      document.querySelector(selector).addEventListener('click', closePopup)
    );
  });
</script>
